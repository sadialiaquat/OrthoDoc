{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmed\\\\Desktop\\\\OrthoDoc\\\\web\\\\src\\\\Pages\\\\Messenger.js\",\n    _s = $RefreshSig$();\n\n// import { authentication } from '../firebase-config';\n// import { useNavigate } from 'react-router-dom';\n// import { useState, useEffect } from \"react\";\n// import { db } from '../firebase-config';\n// import { collection, getDocs } from \"firebase/firestore\";\n// import { query, where } from \"firebase/firestore\";\n// import { getAuth, onAuthStateChanged } from \"firebase/auth\";\n// function Messenger() {\n//  /* const [currentChat, setCurrentChat] = useState();\n// return (\n//    <>\n//      <div className=\"messenger\">\n//        <div className=\"chatMenu\">\n//          <div className=\"chatMenuWrapper\">\n//            <input placeholder=\"Search for doctors\" className=\"chatMenuInput\" />\n//            <Conversation/>          \n//          </div>\n//        </div>\n//        <div className=\"chatBox\">\n//          <div className=\"chatBoxWrapper\">\n//          {currentChat ? (<>\n//        <div className='chatBoxTop'>\n//          <Message/>\n//     <Message own={true}/>  \n//        </div>\n//        <div className=\"chatBoxBottom\">\n//    <textarea className=\"chatMessageInput\" placeholder=\"Write something..\"></textarea>\n//    <button className=\"chatSubmitButton\">\n//                   <div className='sendicon'>  <MdSend/></div>\n//                  </button>\n// </div> </>):(\n//               <span className=\"noConversationText\">\n//                 Open a conversation to start a chat.\n//               </span>\n//             )}\n//          </div>\n//        </div>\n//      </div>\n//      <Link to='/home'>\n//      <div className='backtohome'><FaArrowCircleLeft/></div></Link>\n//    </>\n//  );\n// }*/\n// const [users, setusers] = useState([]);\n//  console.log(\"AUTH\"+ authentication.currentUser.email);\n//  if(!authentication.currentUser){\n//    alert(\"Please Login First\");\n//    //navigation.navigate(\"login\");\n// }\n// const mail = authentication.currentUser.email;\n//  const auth = getAuth();\n//  const querySnapshot = async () => {\n//    const col = collection(db, \"chatroom\");\n//    const q = query(\n//      col,\n//      where(\"sentBy\", \"==\", authentication.currentUser?.email)\n//    );\n//    const q2 = query(\n//      col,\n//      where(\"sentTo\", \"==\", authentication.currentUser?.email)\n//    );\n//    const snap = await getDocs(q);\n//    const snap3 = await getDocs(q2);\n//    let usersEmail = [];\n//    console.log(\"b4 snap 1\");\n//    snap.forEach((doc) => {\n//      if (!usersEmail.find((email) => email == doc.data().sentTo)) {\n//        usersEmail.push(doc.data().sentTo);\n//      }\n//    });\n//    console.log(users);\n//    snap3.forEach((doc) => {\n//      if (!usersEmail.find((email) => email == doc.data().sentBy)) {\n//        // if (doc.data().sentTo != props.route.params.params.param1)\n//        usersEmail.push(doc.data().sentBy);\n//      }\n//    });  //  console.log(users);\n//    usersEmail.map(async (email) => {\n//      const col2 = collection(db, \"doctors\");\n//      const q2 = query(col2, where(\"email\", \"==\", email));\n//      const snap2 = await getDocs(q2);\n//      snap2.forEach((doc) => {\n//        setusers((user) => [...user, doc.data()]);\n//      });\n//    });\n//  };\n//  useEffect(() => {\n//    querySnapshot();\n//  }, []);\n// return (\n//     <div className=\"conversation\">\n//       {users.map((user)=>{\n//  <a> <p style={{color:'white'}}>{user.displayName?? user.name} </p></a> \n//  } ) }\n//     </div>\n//   )}\n// export default Messenger;\nimport React from 'react';\nimport { authentication } from '../firebase-config';\nimport { useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport { db } from '../firebase-config';\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { query, where } from \"firebase/firestore\";\nimport Sidebar from './Sidebar';\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { FaUserCircle } from \"react-icons/fa\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Messenger() {\n  _s();\n\n  const navigate = useNavigate(); // useEffect(()=>{\n  //    if(!authentication.currentUser){\n  //       navigate('/login');\n  //     return <div className='splash'>\n  //        Loading\n  //  </div>\n  //    }\n  // },[])\n\n  const [users, setusers] = useState([]);\n  console.log(\"AUTH\" + authentication.currentUser.email);\n\n  if (!authentication.currentUser) {\n    alert(\"Please Login First\"); //navigation.navigate(\"login\");\n  }\n\n  const mail = authentication.currentUser.email;\n  const auth = getAuth();\n  let usersEmail = [];\n\n  const querySnapshot = async () => {\n    var _authentication$curre, _authentication$curre2;\n\n    const col = collection(db, \"chatroom\");\n    const q = query(col, where(\"sentBy\", \"==\", (_authentication$curre = authentication.currentUser) === null || _authentication$curre === void 0 ? void 0 : _authentication$curre.email));\n    const q2 = query(col, where(\"sentTo\", \"==\", (_authentication$curre2 = authentication.currentUser) === null || _authentication$curre2 === void 0 ? void 0 : _authentication$curre2.email));\n    const snap = await getDocs(q);\n    const snap3 = await getDocs(q2); //let usersEmail = [];\n\n    console.log(\"b4 snap 1\");\n    snap.forEach(doc => {\n      if (!usersEmail.find(email => email == doc.data().sentTo)) {\n        usersEmail.push(doc.data().sentTo);\n      }\n    });\n    console.log(\"b4 snap 3\");\n    snap3.forEach(doc => {\n      if (!usersEmail.find(email => email == doc.data().sentBy)) {\n        // if (doc.data().sentTo != props.route.params.params.param1)\n        usersEmail.push(doc.data().sentBy);\n      }\n    });\n    usersEmail.map(async email => {\n      const col2 = collection(db, \"doctors\");\n      const q2 = query(col2, where(\"email\", \"==\", email));\n      const snap2 = await getDocs(q2);\n      snap2.forEach(doc => {\n        console.log(\"hello\");\n        setusers(user => [...user, doc.data()]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    querySnapshot();\n  }, []);\n  usersEmail.forEach(d => {\n    setusers(prev => [...prev, d.data()]);\n  });\n  console.log(users);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Sidebar, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"Conversations-h\",\n          children: /*#__PURE__*/_jsxDEV(\"u\", {\n            children: \"Conversations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"convo-sidebar\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"convo-ul\",\n            children: users.map(user => {\n              var _user$displayName;\n\n              return /*#__PURE__*/_jsxDEV(\"a\", {\n                onClick: () => {\n                  var _authentication$curre3;\n\n                  return navigate('/message', {\n                    state: {\n                      docid: user.email,\n                      userid: (_authentication$curre3 = authentication.currentUser) === null || _authentication$curre3 === void 0 ? void 0 : _authentication$curre3.email,\n                      current: \"patient\"\n                    }\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"convo-li\",\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"profile-\",\n                    children: /*#__PURE__*/_jsxDEV(FaUserCircle, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 69\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 43\n                  }, this), (_user$displayName = user.displayName) !== null && _user$displayName !== void 0 ? _user$displayName : user.email]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 15\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n\n_s(Messenger, \"a8OhDfMGVKZltYB52D48N2hMqRk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Messenger;\nexport default Messenger;\n\nvar _c;\n\n$RefreshReg$(_c, \"Messenger\");","map":{"version":3,"sources":["C:/Users/Ahmed/Desktop/OrthoDoc/web/src/Pages/Messenger.js"],"names":["React","authentication","useNavigate","useState","useEffect","db","collection","getDocs","query","where","Sidebar","getAuth","onAuthStateChanged","FaUserCircle","Messenger","navigate","users","setusers","console","log","currentUser","email","alert","mail","auth","usersEmail","querySnapshot","col","q","q2","snap","snap3","forEach","doc","find","data","sentTo","push","sentBy","map","col2","snap2","user","d","prev","state","docid","userid","current","displayName"],"mappings":";;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,UAAT,EAAqBC,OAArB,QAAoC,oBAApC;AACA,SAASC,KAAT,EAAgBC,KAAhB,QAA6B,oBAA7B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,OAAT,EAAkBC,kBAAlB,QAA4C,eAA5C;AACA,SAASC,YAAT,QAA6B,gBAA7B;;;;AACA,SAASC,SAAT,GAAqB;AAAA;;AACnB,QAAMC,QAAQ,GAAGb,WAAW,EAA5B,CADmB,CAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,EAAD,CAAlC;AACAe,EAAAA,OAAO,CAACC,GAAR,CAAY,SAASlB,cAAc,CAACmB,WAAf,CAA2BC,KAAhD;;AACA,MAAI,CAACpB,cAAc,CAACmB,WAApB,EAAiC;AAE/BE,IAAAA,KAAK,CAAC,oBAAD,CAAL,CAF+B,CAG/B;AACD;;AACD,QAAMC,IAAI,GAAGtB,cAAc,CAACmB,W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","sourcesContent":["\r\n\r\n\r\n// import { authentication } from '../firebase-config';\r\n// import { useNavigate } from 'react-router-dom';\r\n// import { useState, useEffect } from \"react\";\r\n// import { db } from '../firebase-config';\r\n// import { collection, getDocs } from \"firebase/firestore\";\r\n// import { query, where } from \"firebase/firestore\";\r\n// import { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\n// function Messenger() {\r\n//  /* const [currentChat, setCurrentChat] = useState();\r\n// return (\r\n//    <>\r\n//      <div className=\"messenger\">\r\n//        <div className=\"chatMenu\">\r\n//          <div className=\"chatMenuWrapper\">\r\n//            <input placeholder=\"Search for doctors\" className=\"chatMenuInput\" />\r\n//            <Conversation/>          \r\n//          </div>\r\n//        </div>\r\n//        <div className=\"chatBox\">\r\n//          <div className=\"chatBoxWrapper\">\r\n//          {currentChat ? (<>\r\n//        <div className='chatBoxTop'>\r\n//          <Message/>\r\n//     <Message own={true}/>  \r\n\r\n//        </div>\r\n//        <div className=\"chatBoxBottom\">\r\n//    <textarea className=\"chatMessageInput\" placeholder=\"Write something..\"></textarea>\r\n//    <button className=\"chatSubmitButton\">\r\n//                   <div className='sendicon'>  <MdSend/></div>\r\n//                  </button>\r\n// </div> </>):(\r\n//               <span className=\"noConversationText\">\r\n//                 Open a conversation to start a chat.\r\n//               </span>\r\n//             )}\r\n//          </div>\r\n//        </div>\r\n\r\n//      </div>\r\n//      <Link to='/home'>\r\n//      <div className='backtohome'><FaArrowCircleLeft/></div></Link>\r\n//    </>\r\n//  );\r\n// }*/\r\n\r\n\r\n\r\n// const [users, setusers] = useState([]);\r\n//  console.log(\"AUTH\"+ authentication.currentUser.email);\r\n//  if(!authentication.currentUser){\r\n\r\n//    alert(\"Please Login First\");\r\n//    //navigation.navigate(\"login\");\r\n// }\r\n// const mail = authentication.currentUser.email;\r\n//  const auth = getAuth();\r\n\r\n//  const querySnapshot = async () => {\r\n\r\n//    const col = collection(db, \"chatroom\");\r\n//    const q = query(\r\n//      col,\r\n//      where(\"sentBy\", \"==\", authentication.currentUser?.email)\r\n//    );\r\n//    const q2 = query(\r\n//      col,\r\n//      where(\"sentTo\", \"==\", authentication.currentUser?.email)\r\n//    );\r\n\r\n//    const snap = await getDocs(q);\r\n//    const snap3 = await getDocs(q2);\r\n\r\n//    let usersEmail = [];\r\n//    console.log(\"b4 snap 1\");\r\n//    snap.forEach((doc) => {\r\n\r\n//      if (!usersEmail.find((email) => email == doc.data().sentTo)) {\r\n//        usersEmail.push(doc.data().sentTo);\r\n//      }\r\n//    });\r\n//    console.log(users);\r\n//    snap3.forEach((doc) => {\r\n\r\n//      if (!usersEmail.find((email) => email == doc.data().sentBy)) {\r\n//        // if (doc.data().sentTo != props.route.params.params.param1)\r\n//        usersEmail.push(doc.data().sentBy);\r\n//      }\r\n\r\n//    });  //  console.log(users);\r\n\r\n//    usersEmail.map(async (email) => {\r\n//      const col2 = collection(db, \"doctors\");\r\n//      const q2 = query(col2, where(\"email\", \"==\", email));\r\n//      const snap2 = await getDocs(q2);\r\n//      snap2.forEach((doc) => {\r\n//        setusers((user) => [...user, doc.data()]);\r\n//      });\r\n\r\n//    });\r\n//  };\r\n\r\n\r\n//  useEffect(() => {\r\n//    querySnapshot();\r\n//  }, []);\r\n\r\n\r\n\r\n// return (\r\n//     <div className=\"conversation\">\r\n//       {users.map((user)=>{\r\n//  <a> <p style={{color:'white'}}>{user.displayName?? user.name} </p></a> \r\n//  } ) }\r\n//     </div>\r\n//   )}\r\n\r\n// export default Messenger;\r\n\r\nimport React from 'react';\r\nimport { authentication } from '../firebase-config';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState, useEffect } from \"react\";\r\nimport { db } from '../firebase-config';\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { query, where } from \"firebase/firestore\";\r\nimport Sidebar from './Sidebar';\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport { FaUserCircle } from \"react-icons/fa\";\r\nfunction Messenger() {\r\n  const navigate = useNavigate();\r\n  // useEffect(()=>{\r\n  //    if(!authentication.currentUser){\r\n  //       navigate('/login');\r\n  //     return <div className='splash'>\r\n  //        Loading\r\n  //  </div>\r\n  //    }\r\n  // },[])\r\n  const [users, setusers] = useState([]);\r\n  console.log(\"AUTH\" + authentication.currentUser.email);\r\n  if (!authentication.currentUser) {\r\n\r\n    alert(\"Please Login First\");\r\n    //navigation.navigate(\"login\");\r\n  }\r\n  const mail = authentication.currentUser.email;\r\n  const auth = getAuth();\r\n  let usersEmail = [];\r\n  const querySnapshot = async () => {\r\n\r\n    const col = collection(db, \"chatroom\");\r\n    const q = query(\r\n      col,\r\n      where(\"sentBy\", \"==\", authentication.currentUser?.email)\r\n    );\r\n    const q2 = query(\r\n      col,\r\n      where(\"sentTo\", \"==\", authentication.currentUser?.email)\r\n    );\r\n\r\n    const snap = await getDocs(q);\r\n    const snap3 = await getDocs(q2);\r\n\r\n    //let usersEmail = [];\r\n    console.log(\"b4 snap 1\");\r\n    snap.forEach((doc) => {\r\n\r\n      if (!usersEmail.find((email) => email == doc.data().sentTo)) {\r\n        usersEmail.push(doc.data().sentTo);\r\n      }\r\n    });\r\n    console.log(\"b4 snap 3\");\r\n    snap3.forEach((doc) => {\r\n\r\n      if (!usersEmail.find((email) => email == doc.data().sentBy)) {\r\n        // if (doc.data().sentTo != props.route.params.params.param1)\r\n        usersEmail.push(doc.data().sentBy);\r\n      }\r\n\r\n    });\r\n\r\n\r\n    usersEmail.map(async (email) => {\r\n      const col2 = collection(db, \"doctors\");\r\n      const q2 = query(col2, where(\"email\", \"==\", email));\r\n      const snap2 = await getDocs(q2);\r\n      snap2.forEach((doc) => {\r\n        console.log(\"hello\");\r\n        setusers((user) => [...user, doc.data()]);\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    querySnapshot();\r\n\r\n  }, []);\r\n  usersEmail.forEach((d) => {\r\n    setusers((prev) => [...prev, d.data()]);\r\n  })\r\n  console.log(users);\r\n\r\n  return (<>\r\n    <Sidebar>\r\n      <div className=\"main-main\">\r\n        <h1 className='Conversations-h'><u>Conversations</u></h1>\r\n        <div className='convo-sidebar'>\r\n          <ul className='convo-ul'>\r\n            {users.map((user) => (\r\n              <a onClick={() => navigate('/message', { state: { docid: user.email, userid: authentication.currentUser?.email, current: \"patient\" } })}>\r\n                <li className='convo-li'> <div className='profile-'><FaUserCircle/></div>{user.displayName ?? user.email}</li>\r\n              </a>\r\n\r\n\r\n            ))}\r\n          </ul></div>\r\n      </div>\r\n    </Sidebar>\r\n\r\n  </>)\r\n}\r\n\r\nexport default Messenger;"]},"metadata":{},"sourceType":"module"}