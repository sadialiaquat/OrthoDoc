{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmed\\\\Desktop\\\\OrthoDoc\\\\web\\\\src\\\\Pages\\\\Conversations.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { authentication } from '../firebase-config';\nimport { useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from \"react\";\nimport { db } from '../firebase-config';\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { query, where } from \"firebase/firestore\";\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Conversation() {\n  _s();\n\n  const navigate = useNavigate(); // useEffect(()=>{\n  //    if(!authentication.currentUser){\n  //       navigate('/login');\n  //     return <div className='splash'>\n  //        Loading\n  //  </div>\n  //    }\n  // },[])\n\n  const [users, setusers] = useState([]);\n  console.log(\"AUTH\" + authentication.currentUser.email);\n\n  if (!authentication.currentUser) {\n    alert(\"Please Login First\"); //navigation.navigate(\"login\");\n  }\n\n  const mail = authentication.currentUser.email;\n  const auth = getAuth();\n\n  const querySnapshot = async () => {\n    var _authentication$curre, _authentication$curre2;\n\n    const col = collection(db, \"chatroom\");\n    const q = query(col, where(\"sentBy\", \"==\", (_authentication$curre = authentication.currentUser) === null || _authentication$curre === void 0 ? void 0 : _authentication$curre.email));\n    const q2 = query(col, where(\"sentTo\", \"==\", (_authentication$curre2 = authentication.currentUser) === null || _authentication$curre2 === void 0 ? void 0 : _authentication$curre2.email));\n    const snap = await getDocs(q);\n    const snap3 = await getDocs(q2);\n    let usersEmail = [];\n    console.log(\"b4 snap 1\");\n    snap.forEach(doc => {\n      if (!usersEmail.find(email => email == doc.data().sentTo)) {\n        usersEmail.push(doc.data().sentTo);\n      }\n    });\n    console.log(\"b4 snap 3\");\n    snap3.forEach(doc => {\n      if (!usersEmail.find(email => email == doc.data().sentBy)) {\n        // if (doc.data().sentTo != props.route.params.params.param1)\n        usersEmail.push(doc.data().sentBy);\n      }\n    });\n    console.log(\"After snap 3\");\n    usersEmail.map(async email => {\n      const col2 = collection(db, \"doctors\");\n      const q2 = query(col2, where(\"email\", \"==\", email));\n      const snap2 = await getDocs(q2);\n      snap2.forEach(doc => {\n        setusers(user => [...user, doc.data()]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    querySnapshot();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"conversation\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Conversation, \"a8OhDfMGVKZltYB52D48N2hMqRk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Conversation;\nexport default Conversation;\n\nvar _c;\n\n$RefreshReg$(_c, \"Conversation\");","map":{"version":3,"sources":["C:/Users/Ahmed/Desktop/OrthoDoc/web/src/Pages/Conversations.js"],"names":["React","authentication","useNavigate","useState","useEffect","db","collection","getDocs","query","where","getAuth","onAuthStateChanged","Conversation","navigate","users","setusers","console","log","currentUser","email","alert","mail","auth","querySnapshot","col","q","q2","snap","snap3","usersEmail","forEach","doc","find","data","sentTo","push","sentBy","map","col2","snap2","user"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { authentication } from '../firebase-config';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useState, useEffect } from \"react\";\r\nimport { db } from '../firebase-config';\r\nimport { collection, getDocs } from \"firebase/firestore\";\r\nimport { query, where } from \"firebase/firestore\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nfunction Conversation(){\r\n  const navigate = useNavigate();\r\n // useEffect(()=>{\r\n  //    if(!authentication.currentUser){\r\n   //       navigate('/login');\r\n     //     return <div className='splash'>\r\n      //        Loading\r\n        //  </div>\r\n  //    }\r\n // },[])\r\n const [users, setusers] = useState([]);\r\n console.log(\"AUTH\"+ authentication.currentUser.email);\r\n if(!authentication.currentUser){\r\n   \r\n   alert(\"Please Login First\");\r\n   //navigation.navigate(\"login\");\r\n}\r\nconst mail = authentication.currentUser.email;\r\n const auth = getAuth();\r\n\r\n const querySnapshot = async () => {\r\n\r\n   const col = collection(db, \"chatroom\");\r\n   const q = query(\r\n     col,\r\n     where(\"sentBy\", \"==\", authentication.currentUser?.email)\r\n   );\r\n   const q2 = query(\r\n     col,\r\n     where(\"sentTo\", \"==\", authentication.currentUser?.email)\r\n   );\r\n\r\n   const snap = await getDocs(q);\r\n   const snap3 = await getDocs(q2);\r\n\r\n   let usersEmail = [];\r\n   console.log(\"b4 snap 1\");\r\n   snap.forEach((doc) => {\r\n\r\n     if (!usersEmail.find((email) => email == doc.data().sentTo)) {\r\n       usersEmail.push(doc.data().sentTo);\r\n     }\r\n   });\r\n   console.log(\"b4 snap 3\");\r\n   snap3.forEach((doc) => {\r\n\r\n     if (!usersEmail.find((email) => email == doc.data().sentBy)) {\r\n       // if (doc.data().sentTo != props.route.params.params.param1)\r\n       usersEmail.push(doc.data().sentBy);\r\n     }\r\n\r\n   });    console.log(\"After snap 3\");\r\n\r\n   usersEmail.map(async (email) => {\r\n     const col2 = collection(db, \"doctors\");\r\n     const q2 = query(col2, where(\"email\", \"==\", email));\r\n     const snap2 = await getDocs(q2);\r\n     snap2.forEach((doc) => {\r\n       setusers((user) => [...user, doc.data()]);\r\n     });\r\n     \r\n   });\r\n };\r\n\r\n useEffect(() => {\r\n   querySnapshot();\r\n }, []);\r\n\r\n\r\n\r\nreturn (\r\n    <div className=\"conversation\">\r\n      \r\n    </div>\r\n  )}\r\nexport default Conversation;"]},"metadata":{},"sourceType":"module"}