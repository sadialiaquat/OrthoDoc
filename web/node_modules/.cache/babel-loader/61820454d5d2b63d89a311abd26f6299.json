{"ast":null,"code":"// import { collection, getDocs } from \"firebase/firestore\";\n// import { doc, setDoc } from \"firebase/firestore\";\n// import { query, where } from \"firebase/firestore\";\n// import { useLocation } from 'react-router-dom';\n// import { authentication, db } from '../firebase-config';\n// import { useState, useEffect } from \"react\";\n// import Messenger from \"./Messenger\";\n// import { Link } from \"react-router-dom\";\n// import { FaArrowCircleLeft } from \"react-icons/fa\";\n// import { MdSend } from \"react-icons/md\";\n// function DoctorMessage() {\n//   const location = useLocation();\n//   const [messages, setMessages] = useState([]);\n//   const [temp, setTemp] = useState(\"\");\n//   let messageArraay = [];\n//   const querySnapshot = async () => {\n//     console.log(\"State\", location.state.docid);\n//     const col = collection(db, \"chatroom\");\n//     const q = query(\n//       col,\n//       where(\n//         \"chatId\",\n//         \"==\",\n//         location.state.userid + location.state.docid\n//       )\n//     );\n//     const snap = await getDocs(q);\n//     snap.forEach((doc) => {\n//       const new_obj = {\n//         ...doc.data(),\n//         //createdAt: doc.data().createdAt.toDate().getTime(),\n//       };\n//       messageArraay.push(new_obj);\n//     });\n//     console.log(\"message array\", messageArraay);\n//     setMessages(messageArraay.reverse());\n//     console.log(\"REVERSE\",messageArraay.reverse())\n//     console.log(\"msgs array\", messages)\n//   };\n//   useEffect(() => {\n//     //console.log(props.route);\n//     querySnapshot();\n//   }, []);\n//   const onSend = (messageArray) => {\n//     const msg = messageArray[0];\n//     const mymsg = {\n//       ...msg,\n//       sentBy:\n//         location.state.current == \"doctor\"\n//           ? location.state.docid\n//           : location.state.userid,\n//       sentTo:\n//         location.state.current == \"doctor\"\n//           ? location.state.userid\n//           : location.state.docid,\n//       craetedAt: new Date(),\n//       chatId:\n//         location.state.userid + location.state.docid,\n//     };\n//     //setMessages((previousMessages) =>\n//     // setTemp((prev) => [...prev, mymsg]);\n//     //temp.append(previousMessages,mymsg);\n//     //GiftedChat.append(previousMessages, mymsg)\n//     //console.log(\"set messages\"+temp);\n//     //);\n//     setMessages((previousMessages) =>\n//       messageArraay.push((previousMessages) => [...previousMessages, mymsg])\n//     );\n//     //console.log(\"temppp\",temp);\n//     const docid =\n//       location.state.docid > location.state.userid\n//         ? location.state.userid +\n//         \"-\" +\n//         location.state.docid\n//         : location.state.docid +\n//         \"-\" +\n//         location.state.userid;\n//     const myDoc = doc(db, \"chatroom\", new Date().toString());\n//     setDoc(myDoc, mymsg)\n//       .then(() => {\n//         console.log(\"Document written with ID: \", myDoc.id);\n//       })\n//       .catch((error) => {\n//         console.error(\"Error adding document: \", error.message);\n//       });\n//   };\n//   console.log(\"Doc id :\", location.state.docid)\n//   console.log(\"User id\", location.state.userid)\n//   console.log(\"temppp\", messages);\n//   return (\n//     <>\n//       <div className=\"messenger\">\n//         <div className=\"chatBox\">\n//           <div className=\"chatBoxWrapper\">\n//               <div className='chatBoxTop'>\n//               {messages.map((item, uid) => (\n//                  <div className=\"messages\"> \n//                 <div className={`msg ${item.sentBy== authentication.currentUser.email? 'sent' : 'received'}`}>\n//                   <p className=\"P\">{item.text} </p>     \n//                 </div></div>\n//               ))}\n//               </div>\n//               <div className=\"chatBoxBottom\">\n//                 <input className=\"chatMessageInput\"  onChange={(e) => setTemp(e.target.value)}  placeholder=\"Write something..\"></input>\n//                 <button className=\"chatSubmitButton\" onClick={(temp)=>onSend(messages)}>\n//                   <div className='sendicon'>  <MdSend /></div>\n//                 </button>\n//               </div>\n//           </div>\n//         </div>\n//       </div>\n//       <Link to='/doctorHome'>\n//         <div className='backtohome'><FaArrowCircleLeft /></div></Link>\n//     </>\n//   );\n// }\n// export default DoctorMessage;","map":{"version":3,"sources":["C:/Users/Ahmed/Desktop/OrthoDoc/web/src/Pages/DoctorMessage.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAKA;AAEA;AAEA;AACA","sourcesContent":["// import { collection, getDocs } from \"firebase/firestore\";\r\n// import { doc, setDoc } from \"firebase/firestore\";\r\n// import { query, where } from \"firebase/firestore\";\r\n// import { useLocation } from 'react-router-dom';\r\n// import { authentication, db } from '../firebase-config';\r\n// import { useState, useEffect } from \"react\";\r\n// import Messenger from \"./Messenger\";\r\n// import { Link } from \"react-router-dom\";\r\n// import { FaArrowCircleLeft } from \"react-icons/fa\";\r\n// import { MdSend } from \"react-icons/md\";\r\n// function DoctorMessage() {\r\n//   const location = useLocation();\r\n//   const [messages, setMessages] = useState([]);\r\n//   const [temp, setTemp] = useState(\"\");\r\n\r\n//   let messageArraay = [];\r\n//   const querySnapshot = async () => {\r\n//     console.log(\"State\", location.state.docid);\r\n//     const col = collection(db, \"chatroom\");\r\n//     const q = query(\r\n//       col,\r\n//       where(\r\n//         \"chatId\",\r\n//         \"==\",\r\n//         location.state.userid + location.state.docid\r\n//       )\r\n//     );\r\n//     const snap = await getDocs(q);\r\n   \r\n//     snap.forEach((doc) => {\r\n//       const new_obj = {\r\n//         ...doc.data(),\r\n//         //createdAt: doc.data().createdAt.toDate().getTime(),\r\n//       };\r\n\r\n//       messageArraay.push(new_obj);\r\n//     });\r\n//     console.log(\"message array\", messageArraay);\r\n//     setMessages(messageArraay.reverse());\r\n//     console.log(\"REVERSE\",messageArraay.reverse())\r\n//     console.log(\"msgs array\", messages)\r\n//   };\r\n//   useEffect(() => {\r\n//     //console.log(props.route);\r\n//     querySnapshot();\r\n//   }, []);\r\n//   const onSend = (messageArray) => {\r\n//     const msg = messageArray[0];\r\n//     const mymsg = {\r\n//       ...msg,\r\n//       sentBy:\r\n//         location.state.current == \"doctor\"\r\n//           ? location.state.docid\r\n//           : location.state.userid,\r\n//       sentTo:\r\n//         location.state.current == \"doctor\"\r\n//           ? location.state.userid\r\n//           : location.state.docid,\r\n\r\n//       craetedAt: new Date(),\r\n//       chatId:\r\n//         location.state.userid + location.state.docid,\r\n//     };\r\n//     //setMessages((previousMessages) =>\r\n//     // setTemp((prev) => [...prev, mymsg]);\r\n//     //temp.append(previousMessages,mymsg);\r\n//     //GiftedChat.append(previousMessages, mymsg)\r\n//     //console.log(\"set messages\"+temp);\r\n//     //);\r\n//     setMessages((previousMessages) =>\r\n//       messageArraay.push((previousMessages) => [...previousMessages, mymsg])\r\n//     );\r\n//     //console.log(\"temppp\",temp);\r\n//     const docid =\r\n//       location.state.docid > location.state.userid\r\n//         ? location.state.userid +\r\n//         \"-\" +\r\n//         location.state.docid\r\n//         : location.state.docid +\r\n//         \"-\" +\r\n//         location.state.userid;\r\n\r\n//     const myDoc = doc(db, \"chatroom\", new Date().toString());\r\n//     setDoc(myDoc, mymsg)\r\n//       .then(() => {\r\n//         console.log(\"Document written with ID: \", myDoc.id);\r\n//       })\r\n//       .catch((error) => {\r\n//         console.error(\"Error adding document: \", error.message);\r\n//       });\r\n//   };\r\n\r\n\r\n//   console.log(\"Doc id :\", location.state.docid)\r\n//   console.log(\"User id\", location.state.userid)\r\n//   console.log(\"temppp\", messages);\r\n//   return (\r\n//     <>\r\n\r\n//       <div className=\"messenger\">\r\n    \r\n//         <div className=\"chatBox\">\r\n//           <div className=\"chatBoxWrapper\">\r\n\r\n//               <div className='chatBoxTop'>\r\n//               {messages.map((item, uid) => (\r\n//                  <div className=\"messages\"> \r\n//                 <div className={`msg ${item.sentBy== authentication.currentUser.email? 'sent' : 'received'}`}>\r\n//                   <p className=\"P\">{item.text} </p>     \r\n                   \r\n//                 </div></div>\r\n//               ))}\r\n//               </div>\r\n             \r\n//               <div className=\"chatBoxBottom\">\r\n//                 <input className=\"chatMessageInput\"  onChange={(e) => setTemp(e.target.value)}  placeholder=\"Write something..\"></input>\r\n//                 <button className=\"chatSubmitButton\" onClick={(temp)=>onSend(messages)}>\r\n//                   <div className='sendicon'>  <MdSend /></div>\r\n//                 </button>\r\n//               </div>\r\n//           </div>\r\n//         </div>\r\n\r\n//       </div>\r\n//       <Link to='/doctorHome'>\r\n//         <div className='backtohome'><FaArrowCircleLeft /></div></Link>\r\n\r\n\r\n\r\n\r\n//     </>\r\n\r\n//   );\r\n\r\n// }\r\n// export default DoctorMessage; \r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}