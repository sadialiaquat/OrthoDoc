{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ahmed\\\\Desktop\\\\OrthoDoc\\\\web\\\\src\\\\Pages\\\\DoctorMessage.js\",\n    _s = $RefreshSig$();\n\nimport { collection, getDocs, orderBy } from \"firebase/firestore\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { query, where, Timestamp } from \"firebase/firestore\";\nimport { useLocation } from 'react-router-dom';\nimport { authentication, db, storage } from '../firebase-config';\nimport { useState, useEffect, useRef } from \"react\";\nimport Messenger from \"./Messenger\";\nimport { Link } from \"react-router-dom\";\nimport { FaArrowCircleLeft } from \"react-icons/fa\";\nimport { MdSend } from \"react-icons/md\";\nimport { ref, getDownloadURL, uploadBytesResumable } from 'firebase/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction DoctorMessage() {\n  _s();\n\n  const location = useLocation();\n  const [messages, setMessages] = useState([]);\n  const [temp, setTemp] = useState(\"\");\n  const imageRef = useRef(null);\n  let messageArraay = [];\n\n  const querySnapshot = async () => {\n    console.log(\"State\", location.state.docid);\n    const col = collection(db, \"chatroom\");\n    const q = query(col, where(\"chatId\", \"==\", location.state.userid + location.state.docid), orderBy(\"createdAt\", \"asc\"));\n    const snap = await getDocs(q);\n    snap.forEach(doc => {\n      const new_obj = { ...doc.data()\n      };\n      messageArraay.push(new_obj);\n    });\n    console.log(\"message array\", messageArraay);\n    setMessages(messageArraay); // console.log(\"REVERSE\",messageArraay.reverse())\n  };\n\n  useEffect(() => {\n    querySnapshot();\n  }, []);\n\n  const sendImageMessage = e => {\n    const image = e.target.files[0];\n    const fileType = image.type.split('/')[1];\n    const storageRef = ref(storage, `image-${Date.now()}.${fileType}`);\n    const uploadTask = uploadBytesResumable(storageRef, image);\n    uploadTask.on('state_changed', snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n    }, error => {\n      console.log(error);\n    }, () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(downloadURL => {\n        addMessage(downloadURL, 'image');\n      });\n    });\n  };\n\n  const addMessage = async (temp, type) => {\n    try {\n      const mymsg = {\n        sentBy: location.state.current == \"doctor\" ? location.state.docid : location.state.userid,\n        sentTo: location.state.current == \"doctor\" ? location.state.userid : location.state.docid,\n        createdAt: Timestamp.fromDate(new Date()),\n        chatId: location.state.userid + location.state.docid,\n        text: temp,\n        type: type\n      };\n      const myDoc = doc(db, \"chatroom\", new Date().toString());\n      setDoc(myDoc, mymsg);\n      setMessages(prev => [...prev, mymsg]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const sendTextMessage = () => {\n    addMessage(temp, 'text');\n  };\n\n  console.log(\"Doc id :\", location.state.docid);\n  console.log(\"User id\", location.state.userid);\n  console.log(\"temppp\", messages);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messenger\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatBox\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatBoxWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatBoxTop\",\n            children: messages.map((item, uid) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"messages\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `msg ${item.sentBy == authentication.currentUser.email ? 'sent' : 'received'}`,\n                children: item.type === 'text' ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"P\",\n                  children: [item.text, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.text,\n                  style: {\n                    width: '750px',\n                    height: '750px',\n                    objectPosition: 'cover'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 18\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chatBoxBottom\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"chatMessageInput\",\n              onChange: e => setTemp(e.target.value),\n              placeholder: \"Write something..\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"file-input\",\n              ref: imageRef,\n              accept: \"image/*\",\n              className: \"hidden\",\n              type: \"file\",\n              onChange: sendImageMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chatSubmitButton\",\n              onClick: sendTextMessage,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sendicon\",\n                children: [\"  \", /*#__PURE__*/_jsxDEV(MdSend, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 47\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/doctorHome\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"backtohome\",\n        children: /*#__PURE__*/_jsxDEV(FaArrowCircleLeft, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 37\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(DoctorMessage, \"tMa65Z+hf6av98XguGkMD1h1PHk=\", false, function () {\n  return [useLocation];\n});\n\n_c = DoctorMessage;\nexport default DoctorMessage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DoctorMessage\");","map":{"version":3,"sources":["C:/Users/Ahmed/Desktop/OrthoDoc/web/src/Pages/DoctorMessage.js"],"names":["collection","getDocs","orderBy","doc","setDoc","query","where","Timestamp","useLocation","authentication","db","storage","useState","useEffect","useRef","Messenger","Link","FaArrowCircleLeft","MdSend","ref","getDownloadURL","uploadBytesResumable","DoctorMessage","location","messages","setMessages","temp","setTemp","imageRef","messageArraay","querySnapshot","console","log","state","docid","col","q","userid","snap","forEach","new_obj","data","push","sendImageMessage","e","image","target","files","fileType","type","split","storageRef","Date","now","uploadTask","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","then","downloadURL","addMessage","mymsg","sentBy","current","sentTo","createdAt","fromDate","chatId","text","myDoc","toString","prev","sendTextMessage","map","item","uid","currentUser","email","width","height","objectPosition","value"],"mappings":"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","sourcesContent":["import { collection, getDocs, orderBy } from \"firebase/firestore\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\nimport { query, where, Timestamp } from \"firebase/firestore\";\r\nimport { useLocation } from 'react-router-dom';\r\nimport { authentication, db, storage } from '../firebase-config';\r\nimport { useState, useEffect, useRef} from \"react\";\r\nimport Messenger from \"./Messenger\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FaArrowCircleLeft } from \"react-icons/fa\";\r\nimport { MdSend } from \"react-icons/md\";\r\nimport { ref, getDownloadURL, uploadBytesResumable } from 'firebase/storage';\r\nfunction DoctorMessage() {\r\n  const location = useLocation();\r\n  const [messages, setMessages] = useState([]);\r\n  const [temp, setTemp] = useState(\"\");\r\n  const imageRef = useRef(null);\r\n\r\n  \r\n  let messageArraay = [];\r\n  const querySnapshot = async () => {\r\n    console.log(\"State\", location.state.docid);\r\n    const col = collection(db, \"chatroom\");\r\n    const q = query(\r\n      col,\r\n      where(\r\n        \"chatId\",\r\n        \"==\",\r\n        location.state.userid + location.state.docid\r\n      ), orderBy(\"createdAt\", \"asc\")\r\n    );\r\n    const snap = await getDocs(q);\r\n   \r\n    snap.forEach((doc) => {\r\n      const new_obj = {\r\n        ...doc.data(),\r\n      };\r\n\r\n      messageArraay.push(new_obj);\r\n    });\r\n    console.log(\"message array\", messageArraay);\r\n    setMessages(messageArraay);\r\n    // console.log(\"REVERSE\",messageArraay.reverse())\r\n  };\r\n  useEffect(() => {\r\n    querySnapshot();\r\n  }, []);\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n  const sendImageMessage = (e) => {\r\n    const image = e.target.files[0];\r\n    const fileType = image.type.split('/')[1];\r\n    const storageRef = ref(storage, `image-${Date.now()}.${fileType}`);\r\n    const uploadTask = uploadBytesResumable(storageRef, image);\r\n    uploadTask.on(\r\n        'state_changed',\r\n        (snapshot) => {\r\n            const progress = Math.round(\r\n                (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n            );\r\n        },\r\n        (error) => {\r\n            console.log(error);\r\n        },\r\n        () => {\r\n            getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n                addMessage(downloadURL, 'image');\r\n            });\r\n        }\r\n    );\r\n};\r\n\r\nconst addMessage = async (temp, type) => {\r\n  try {\r\n    \r\n    const mymsg = {\r\n      sentBy:\r\n        location.state.current == \"doctor\"\r\n          ? location.state.docid\r\n          : location.state.userid,\r\n      sentTo:\r\n        location.state.current == \"doctor\"\r\n          ? location.state.userid\r\n          : location.state.docid,\r\n\r\n      createdAt: Timestamp.fromDate(new Date()),\r\n      chatId:\r\n        location.state.userid + location.state.docid,\r\n      text:temp,\r\n      type:type,\r\n    \r\n    }\r\n    const myDoc = doc(db, \"chatroom\", new Date().toString());\r\n    setDoc(myDoc, mymsg);\r\n\r\n    setMessages((prev)=>[...prev, mymsg])\r\n\r\n  \r\n  }\r\n    catch (error) {\r\n      console.log(error);\r\n  }\r\n};\r\nconst sendTextMessage = () => {\r\n  addMessage(temp,'text');\r\n\r\n};\r\n\r\n\r\n\r\n  console.log(\"Doc id :\", location.state.docid)\r\n  console.log(\"User id\", location.state.userid)\r\n  console.log(\"temppp\", messages);\r\n  return (\r\n    <>\r\n\r\n      <div className=\"messenger\">\r\n    \r\n        <div className=\"chatBox\">\r\n          <div className=\"chatBoxWrapper\">\r\n\r\n              <div className='chatBoxTop'>\r\n              {messages.map((item, uid) => (\r\n                 <div className=\"messages\">\r\n                  \r\n                <div className={`msg ${item.sentBy== authentication.currentUser.email? 'sent' : 'received'}`}>\r\n                  {\r\n                    item.type==='text'?\r\n                    <p className=\"P\">{item.text} </p>:\r\n                    <img src={item.text} style={{width:'750px', height:'750px',objectPosition:'cover'}} />\r\n                    \r\n                  }\r\n\r\n                </div></div>\r\n              ))}\r\n              </div>\r\n              <div className=\"chatBoxBottom\">\r\n                <input className=\"chatMessageInput\"  onChange={(e) => setTemp(e.target.value)}  placeholder=\"Write something..\"></input>\r\n                <input id=\"file-input\"\r\n                        ref={imageRef}\r\n                        accept=\"image/*\"\r\n                        className=\"hidden\"\r\n                        type=\"file\"\r\n                        onChange={sendImageMessage}/>\r\n                <button className=\"chatSubmitButton\" onClick={sendTextMessage}>\r\n                  <div className='sendicon'>  <MdSend /></div>\r\n                </button>\r\n              </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      <Link to='/doctorHome'>\r\n        <div className='backtohome'><FaArrowCircleLeft /></div></Link>\r\n    </>\r\n\r\n  );\r\n}\r\nexport default DoctorMessage;"]},"metadata":{},"sourceType":"module"}